<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [
        <!ENTITY nbsp "&#160;">
        <!ENTITY copy "&#169;">
        ]>
<html lang="de"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:hk="http://xmlns.jcp.org/jsf/composite/hoerbuchkatalog">
<!--@elvariable id="hoererSession" type="wbh.bookworm.hoerbuchkatalog.ui.katalog.HoererSession"-->
<!--@elvariable id="meineMerkliste" type="wbh.bookworm.hoerbuchkatalog.ui.katalog.MeineMerkliste"-->
<ui:composition template="hoerbuchkatalog-ui.xhtml">
    <ui:define name="container">
        <h:panelGroup rendered="#{hoererSession.hoererIstUnbekannt}">
            Leider ist Ihre Hörernummer dem Hörbuchkatalog-System nicht bekannt.<br/>
            Bitte melden Sie sich <a href="/cb-login.html">hier</a> an oder wenden Sie sich an die WBH.
        </h:panelGroup>
        <h:panelGroup rendered="#{hoererSession.hoererIstBekannt}"
                      layout="block" styleClass="leading">
            <h2 class="contentheading">Merkliste</h2>
            <h:form id="merkliste" styleClass="Wishlist">
                <hk:navigation/>
                <div class="download-header">
                    <h3>
                        <h:outputText rendered="#{meineMerkliste.anzahl == 0}"
                                      value="Ihre Merkliste ist leer."/>
                        <h:outputText rendered="#{meineMerkliste.anzahl == 1}"
                                      value="Ihre Merkliste enthält 1 Hörbuch."/>
                        <h:outputText rendered="#{meineMerkliste.anzahl > 1}"
                                      value="Ihre Merkliste enthält #{meineMerkliste.anzahl} Hörbücher."/>
                    </h3>
                </div>
                <p></p>
                <h:dataTable id="merklisteTabelle"
                             rendered="#{meineMerkliste.anzahl > 0}"
                             styleClass="tab basket-table"
                             columnClasses="basket-column1,basket-column2,basket-column3,basket-column4,basket-column5"
                             rowClasses="row basket-row1,row basket-row2"
                             cellpadding="0" cellspacing="0"
                             value="#{meineMerkliste.titelnummern}" var="titelnummer">
                    <h:column headerClass="basket-column-header">
                        <f:facet name="header">
                            Titelnummer
                        </f:facet>
                        <h:outputText styleClass="basket-column-content"
                                      value="#{titelnummer}"/>
                    </h:column>
                    <h:column headerClass="basket-column-header">
                        <f:facet name="header">
                            Autor
                        </f:facet>
                        <h:outputText styleClass="basket-column-content"
                                      value="#{meineMerkliste.hoerbuchAutor(titelnummer)}"/>
                    </h:column>
                    <h:column headerClass="basket-column-header">
                        <f:facet name="header">
                            Titel
                        </f:facet>
                        <h:outputText styleClass="basket-column-content"
                                      value="#{meineMerkliste.hoerbuchTitel(titelnummer)}"/>
                    </h:column>
                    <h:column headerClass="basket-column-header">
                        <f:facet name="header">
                            Merkliste
                        </f:facet>
                        <h:commandLink rendered="#{!meinWarenkorb.cdEnthalten(titelnummer)}"
                                       styleClass="basket-order-link post"
                                       action="#{meineMerkliste.inCdWarenkorbVerschieben(titelnummer)}"
                                       value="CD bestellen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{meineMerkliste.downloadFuerHoererVerfuegbar(titelnummer)}"
                                       styleClass="basket-order-link download"
                                       action="#{meineMerkliste.inDownloadWarenkorbVerschieben(titelnummer)}"
                                       value="Download">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink action="#{meineMerkliste.entfernen(titelnummer)}"
                                       styleClass="basket-order-link list wishlist"
                                       value="Löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                    </h:column>
                </h:dataTable>
            </h:form>
        </h:panelGroup>
        <h:panelGroup rendered="#{hoererSession.hoererIstBekannt}"
                      layout="block" styleClass="noticetext">
            <h3>Hinweise zur Merkliste</h3>
            In der Merkliste sind alle Hörbücher aufgeführt, die Sie sich vorgemerkt haben.
            Hier haben Sie die Möglichkeit die Titel als CD oder als Download zu bestellen und Sie können natürlich auch Hörbücher wieder aus der Liste löschen.
        </h:panelGroup>
    </ui:define>
</ui:composition>
</html>
