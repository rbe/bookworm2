<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [
        <!ENTITY nbsp "&#160;">
        <!ENTITY copy "&#169;">
        ]>
<html lang="de"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:hk="http://xmlns.jcp.org/jsf/composite/hoerbuchkatalog"
      xmlns:wk="http://xmlns.jcp.org/jsf/composite/warenkorb">
<ui:composition template="hoerbuchkatalog-ui.xhtml">
    <ui:define name="container">
        <h:form id="bestellung">
            <div class="leading">
                <h2 class="contentheading">Bestellung Ihres Warenkorb - Onlinekatalog</h2>
                <hk:navigation/>
                <h:panelGroup rendered="#{hoererSession.hoererIstBekannt}"
                              class="download-header" layout="block">
                    <h3>Auswahltitel für den Download</h3>
                    <wk:download-warenkorb-tabelle warenkorb="#{meinWarenkorb.downloadWarenkorb}"
                                                   readonly="false"/>
                </h:panelGroup>
                <h:panelGroup layout="block" styleClass="post-header">
                    <h3>Auswahltitel für die Bestellung per CD</h3>
                    <wk:cd-warenkorb-tabelle warenkorb="#{meinWarenkorb.cdWarenkorb}"
                                             readonly="false"/>
                </h:panelGroup>
                <h:panelGrid rendered="#{meineBestellung.anzahlImWarenkorb > 0}"
                             columns="2"
                             styleClass="basket-member"
                             columnClasses="basket-order-column1,basket-order-column2"
                             rowClasses="basket-order-row1,basket-order-row2">

                    <h:panelGroup>
                        <div class="basketerror">
                            <h:message for="name"/>
                        </div>
                        <h:outputLabel for="name" value="Name"/>
                    </h:panelGroup>
                    <h:inputText id="name"
                                 value="#{meineBestellung.hoerername}"
                                 styleClass="input_hoerername"
                                 readonly="#{meineBestellung.hasHoerername()}"
                                 required="true" requiredMessage="Bitte geben Sie Ihren Namen ein"
                                 validatorMessage="Bitte geben Sie mehr als 3 Zeichen ein">
                        <f:validateLength minimum="4"/>
                    </h:inputText>

                    <h:panelGroup>
                        <div class="basketerror">
                            <h:message for="hoerernummer"/>
                        </div>
                        <h:outputLabel for="hoerernummer" value="Hörernummer"/>
                    </h:panelGroup>
                    <h:inputText id="hoerernummer"
                                 value="#{meineBestellung.hoerernummer}"
                                 onkeypress="if (event.which === 8 || event.which === 97 || event.key === 'Tab' || event.key === 'ArrowLeft' || event.key === 'ArrowRight' || (event.which &gt; 47 &amp;&amp; event.which &lt; 58)) return true; else return false;"
                                 readonly="#{meineBestellung.hasHoerernummer()}"
                                 required="true"
                                 requiredMessage="Bitte geben Sie Ihre Hörernummer ein"
                                 validatorMessage="Bitte geben Sie mehr als 2 Zahlen ein"
                                 converterMessage="Bitte geben Sie nur Zahlen ein"
                                 styleClass="input_hoerernummer">
                        <f:validateLength minimum="3"/>
                    </h:inputText>

                    <h:panelGroup>
                        <div class="basketerror">
                            <h:message for="email"/>
                        </div>
                        <h:outputLabel for="email" value="E-Mail"/>
                    </h:panelGroup>
                    <h:inputText id="email"
                                 value="#{meineBestellung.hoereremail}"
                                 required="true"
                                 requiredMessage="Bitte geben Sie Ihre E-Mail-Adresse ein"
                                 validatorMessage="Bitte geben Sie mehr als 5 Zeichen ein"
                                 styleClass="input_hoereremail">
                        <f:validateLength minimum="6"/>
                    </h:inputText>

                    <h:panelGroup>
                        <div class="basketerror">
                            <h:message for="bemerkung"/>
                        </div>
                        <h:outputLabel for="bemerkung" value="Bemerkung"/>
                    </h:panelGroup>
                    <h:inputTextarea id="bemerkung"
                                     value="#{meineBestellung.bemerkung}"
                                     required="false"
                                     validatorMessage="Bitte geben Sie mehr als 5 Zeichen ein"
                                     styleClass="input_bemerkung"
                                     rows="5" cols="35">
                        <f:validateLength minimum="6"/>
                    </h:inputTextarea>

                    <h:panelGroup>
                        <div class="basketerror">
                            <h:message for="bestellkarteMischen"/>
                        </div>
                        <h:outputLabel for="bestellkarteMischen" value="Bestellkarte mischen?"/>
                    </h:panelGroup>
                    <h:selectBooleanCheckbox id="bestellkarteMischen"
                                             value="#{meineBestellung.bestellkarteMischen}"
                                             required="false"
                                             styleClass="input_bestellkarteMischen">
                    </h:selectBooleanCheckbox>

                    <h:panelGroup>
                        <div class="basketerror">
                            <h:message for="alteBestellkarteLoeschen"/>
                        </div>
                        <h:outputLabel for="alteBestellkarteLoeschen"
                                       value="Alte Bestellkarte löschen?"/>
                    </h:panelGroup>
                    <h:selectBooleanCheckbox id="alteBestellkarteLoeschen"
                                             value="#{meineBestellung.alteBestellkarteLoeschen}"
                                             required="false"
                                             styleClass="input_alteBestellkarteLoeschen">
                    </h:selectBooleanCheckbox>
                    <h:outputLabel value=" "/>
                    <h:commandButton value="Bestellen"
                                     action="#{meineBestellung.bestellen}"
                                     onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);setTimeout('document.getElementById(\'' + this.id + '\').disabled=false;', 150);"
                                     styleClass="basketsubmit">
                        <f:ajax event="action" execute="@form" render="@all"/>
                    </h:commandButton>
                    <h:outputLabel id="orderSubmitMessage" value="#{meineBestellung.bestellungStatusNachricht}"/>
                </h:panelGrid>
            </div>
            <div class="noticetext">
                <h3>Hinweise zum Warenkorb</h3>
                Im Warenkorb erhalten Sie eine Übersicht Ihrer Bestellungen, unterteilt in "Downloads" und "Bestellungen per CD". Geben Sie für eine Bestellung Ihre Daten und Ihre Hörernummer in die entsprechenden Felder ein und klicken Sie auf Bestellen.
                <p>Mit Ihrer Bestellung wird eine Hörbuchdatei inkl. Wasserzeichen generiert. Informationen zum Bearbeitungsstatus und einen Link für den Download erhalten Sie unter "Downloads".</p>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
</html>
