<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html [
        <!ENTITY nbsp "&#160;">
        <!ENTITY copy "&#169;">
        ]>
<html lang="de"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:hk="http://xmlns.jcp.org/jsf/composite/hoerbuchkatalog">
<!--@elvariable id="katalogsuchergebnis" type="wbh.bookworm.hoerbuchkatalog.ui.katalog.Katalogsuchergebnis"-->
<!--@elvariable id="meineWarenkorb" type="wbh.bookworm.hoerbuchkatalog.ui.katalog.MeinWarenkorb"-->
<!--@elvariable id="meineMerkliste" type="wbh.bookworm.hoerbuchkatalog.ui.katalog.MeineMerkliste"-->
<ui:composition template="hoerbuchkatalog-ui.xhtml">
    <ui:define name="container">
        <h:form id="katalogsuchergebnisForm">
            <h:panelGroup layout="block" styleClass="leading">
                <h2 class="contentheading">Ihre Suchergebnisse</h2>
                <hk:navigation/>
                <h:panelGroup rendered="#{katalogsuchergebnis.suchparameterAlsText.length() > 0}"
                              layout="block">
                    <p class="line15 resulttext">
                        Ihre Suche nach
                        <span class="suchbegriff">
                            <h:outputText value="#{katalogsuchergebnis.suchparameterAlsText}"/>
                        </span>
                        ergab
                        <span class="suchtreffer">
                            <h:outputText rendered="#{katalogsuchergebnis.gesamtAnzahlTreffer > 0}"
                                          value="#{katalogsuchergebnis.gesamtAnzahlTreffer}"/>
                            <h:outputText rendered="#{katalogsuchergebnis.gesamtAnzahlTreffer == 0}"
                                          value="keine"/>
                        </span>
                        Treffer.
                        <h:panelGroup rendered="#{katalogsuchergebnis.gesamtAnzahlTreffer > 1000}"
                                      layout="block">
                            Die Anzeige wird auf 1000 begrenzt.
                        </h:panelGroup>
                    </p>
                </h:panelGroup>
                <h:dataTable rendered="#{katalogsuchergebnis.anzahl > 0}"
                             id="suchergebnisTabelle"
                             styleClass="tab result-table"
                             columnClasses="result-column1,result-column2,result-column3,result-column4,result-column5"
                             rowClasses="result-row1,result-row2"
                             cellpadding="0" cellspacing="0"
                             value="#{katalogsuchergebnis.aktuelleSeite}" var="belastung"
                             rows="#{katalogsuchergebnis.anzahlHoerbuecherProSeite}">
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Titelnummer
                        </f:facet>
                        <h:outputText styleClass="result-column-content" value="#{belastung.titelnummer}"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Autor
                        </f:facet>
                        <h:outputText styleClass="result-column-content" value="#{belastung.autor}"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Titel
                        </f:facet>
                        <h:outputText styleClass="result-column-content" value="#{belastung.titel}"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Details
                        </f:facet>
                        <h:commandLink action="#{katalogsuchergebnis.ansehen(belastung.titelnummer)}" value="Detail"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Aktion
                        </f:facet>

                        <h:commandLink id="cdWarenkorbHinzufuegenButton"
                                       rendered="#{!meinWarenkorb.cdEnthalten(belastung.titelnummer)}"
                                       styleClass="basket-order-link post"
                                       action="#{meinWarenkorb.cdHinzufuegen(belastung.titelnummer)}"
                                       value="CD bestellen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{meinWarenkorb.cdEnthalten(belastung.titelnummer)}"
                                       styleClass="basket-remove-link"
                                       action="#{meinWarenkorb.cdEntfernen(belastung.titelnummer)}"
                                       value="CD Bestellung löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>

                        <h:commandLink rendered="#{meinWarenkorb.isDownloadHinzufuegenAnzeigen(belastung.titelnummer)}"
                                       styleClass="basket-order-link download"
                                       action="#{meinWarenkorb.downloadHinzufuegen(belastung.titelnummer)}"
                                       value="Download">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{meinWarenkorb.isDownloadEntfernenAnzeigen(belastung.titelnummer)}"
                                       styleClass="basket-remove-link clr"
                                       action="#{meinWarenkorb.downloadEntfernen(belastung.titelnummer)}"
                                       value="Download Bestellung löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>

                        <h:commandLink
                                rendered="#{meineMerkliste.isMerklisteHinzufuegenAnzeigen(belastung.titelnummer)}"
                                styleClass="basket-order-link wishlist"
                                action="#{meineMerkliste.hinzufuegen(belastung.titelnummer)}" value="Merken">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{meineMerkliste.isMerklisteEntfernenAnzeigen(belastung.titelnummer)}"
                                       styleClass="basket-remove-link clr"
                                       action="#{meineMerkliste.entfernen(belastung.titelnummer)}"
                                       value="Aus Merkliste löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                    </h:column>
                    <f:facet name="footer">
                        <h:panelGroup>
                            <h:commandButton value="Zurück"
                                             disabled="#{!katalogsuchergebnis.vorherigeSeiteVorhanden}"
                                             action="#{katalogsuchergebnis.vorherigeSeite}"/>
                            &nbsp;Seite
                            <h:outputText value="#{katalogsuchergebnis.aktuelleSeitennummer}"/> von
                            <h:outputText value="#{katalogsuchergebnis.seitenanzahl}"/>&nbsp;
                            <h:commandButton value="Weiter"
                                             disabled="#{!katalogsuchergebnis.naechsteSeiteVorhanden}"
                                             action="#{katalogsuchergebnis.naechsteSeite}"/>
                        </h:panelGroup>
                    </f:facet>
                </h:dataTable>
            </h:panelGroup>
        </h:form>
        <h:panelGroup layout="block" styleClass="noticetext">
            <h3>Hinweise für bessere Suchergebnisse</h3>
            <p>
                Die Suche findet alle Einträge die Ihren Suchbegriff enthalten - auch als Wortbestandteil.<br/>
                Eine Suche nach »test« findet also auch »späteste«.
            </p>
        </h:panelGroup>
    </ui:define>
</ui:composition>
</html>
