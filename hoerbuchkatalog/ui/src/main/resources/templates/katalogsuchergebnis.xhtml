<!--
  ~ Copyright (C) 2011-2018 art of coding UG, https://www.art-of-coding.eu
  ~ Alle Rechte vorbehalten. Nutzung unterliegt Lizenzbedingungen.
  ~ All rights reserved. Use is subject to license terms.
  -->

<!DOCTYPE html [
        <!ENTITY nbsp "&#160;">
        <!ENTITY copy "&#169;">
        ]>
<html lang="de"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:hk="http://xmlns.jcp.org/jsf/composite/bookworm/hk">
<ui:composition template="hoerbuchkatalog-ui.xhtml">
    <ui:define name="container">
        <!--h:form rendered="#{null != katalogsuchergebnis}"-->
        <h:form id="suchergebnisForm">
            <div class="leading">
                <h2 class="contentheading">Ihre Suchergebnisse</h2>
                <hk:navigation/>
                <h:panelGroup layout="block" rendered="#{katalogsuchergebnis.suchparameterAlsText.length() > 0}">
                    <p class="line15 resulttext">
                        Ihre Suche nach
                        <span class="suchbegriff">
                            <h:outputText value="#{katalogsuchergebnis.suchparameterAlsText}"/>
                        </span>
                        ergab
                        <span class="suchtreffer">
                            <h:outputText rendered="#{katalogsuchergebnis.anzahl > 0}"
                                          value="#{katalogsuchergebnis.anzahl}"/>
                            <h:outputText rendered="#{katalogsuchergebnis.anzahl == 0}"
                                          value="keine"/>
                        </span>
                        Treffer
                    </p>
                </h:panelGroup>
                <!--offset="{searchBean.paginateableSearch.offset}"-->
                <h:dataTable id="suchergebnisTabelle"
                             styleClass="tab result-table"
                             columnClasses="result-column1,result-column2,result-column3,result-column4,result-column5"
                             rowClasses="result-row1,result-row2"
                             cellpadding="0" cellspacing="0"
                             rendered="#{katalogsuchergebnis.anzahl > 0}"
                             value="#{katalogsuchergebnis.aktuelleSeite}" var="hoerbuch"
                             rows="#{katalogsuchergebnis.anzahlHoerbuecherProSeite}">
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Titelnummer
                        </f:facet>
                        <h:outputText styleClass="result-column-content" value="#{hoerbuch.titelnummer}"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Autor
                        </f:facet>
                        <h:outputText styleClass="result-column-content" value="#{hoerbuch.autor}"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Titel
                        </f:facet>
                        <h:outputText styleClass="result-column-content" value="#{hoerbuch.titel}"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Details
                        </f:facet>
                        <h:commandLink action="#{katalogsuchergebnis.ansehen(hoerbuch.titelnummer)}" value="Detail"/>
                    </h:column>
                    <h:column headerClass="result-column-header">
                        <f:facet name="header">
                            Aktion
                        </f:facet>

                        <h:commandLink id="cdWarenkorbHinzufuegenButton"
                                       rendered="#{!meinWarenkorb.cdEnthalten(hoerbuch.titelnummer)}"
                                       styleClass="basket-order-link post"
                                       action="#{meinWarenkorb.cdHinzufuegen(hoerbuch.titelnummer)}"
                                       value="CD bestellen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{meinWarenkorb.cdEnthalten(hoerbuch.titelnummer)}"
                                       styleClass="basket-remove-link"
                                       action="#{meinWarenkorb.cdEntfernen(hoerbuch.titelnummer)}"
                                       value="CD Bestellung löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>

                        <h:commandLink rendered="#{hoerbuch.downloadbar and meinWarenkorb.downloadFuerHoererVerfuegbar(hoerbuch.titelnummer)}"
                                       styleClass="basket-order-link download"
                                       action="#{meinWarenkorb.downloadHinzufuegen(hoerbuch.titelnummer)}"
                                       value="Download">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{hoerbuch.downloadbar and meinWarenkorb.downloadEnthalten(hoerbuch.titelnummer)}"
                                       styleClass="basket-remove-link clr"
                                       action="#{meinWarenkorb.downloadEntfernen(hoerbuch.titelnummer)}"
                                       value="Aus Warenkorb löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>

                        <h:commandLink rendered="#{!meineMerkliste.enthalten(hoerbuch.titelnummer)}"
                                       styleClass="basket-order-link wishlist"
                                       action="#{meineMerkliste.hinzufuegen(hoerbuch.titelnummer)}" value="Merken">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                        <h:commandLink rendered="#{meineMerkliste.enthalten(hoerbuch.titelnummer)}"
                                       styleClass="basket-remove-link clr"
                                       action="#{meineMerkliste.entfernen(hoerbuch.titelnummer)}"
                                       value="Aus Merkliste löschen">
                            <f:ajax event="action" execute="@form" render="@form"/>
                        </h:commandLink>
                    </h:column>
                    <f:facet name="footer">
                        <h:panelGroup>
                            <h:commandButton value="Zurück"
                                             disabled="#{!katalogsuchergebnis.vorherigeSeiteVorhanden}"
                                             action="#{katalogsuchergebnis.vorherigeSeite}"/>
                            &nbsp;Seite
                            <h:outputText value="#{katalogsuchergebnis.aktuelleSeitennummer}"/> von
                            <h:outputText value="#{katalogsuchergebnis.seitenanzahl}"/>&nbsp;
                            <h:commandButton value="Weiter"
                                             disabled="#{!katalogsuchergebnis.naechsteSeiteVorhanden}"
                                             action="#{katalogsuchergebnis.naechsteSeite}"/>
                        </h:panelGroup>
                    </f:facet>
                </h:dataTable>
            </div>
        </h:form>
        <div class="noticetext">
            <h3>Hinweise für bessere Suchergebnisse</h3>
            Die Suche findet alle Einträge die Ihren Suchbegriff enthalten - auch als Wortbestandteil.<br/>Eine Suche nach »test« findet also auch »späteste«.
        </div>
    </ui:define>
</ui:composition>
</html>
